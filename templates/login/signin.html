{% extends 'login/login.html' %}
{% load static %}
{% static "img" as img %}
{% block content2 %}
<div class="d-flex flex-column flex-root">
	<div class="login login-4 wizard d-flex flex-column flex-lg-row flex-column-fluid">
		<div class="login-container order-2 order-lg-1 d-flex flex-center flex-row-fluid px-7 pt-lg-0 pb-lg-0 pt-4 pb-6 bg-white">
			<div class="login-content d-flex flex-column pt-lg-0 pt-12">
				<a href="{% url 'home' %}" class="login-logo"><img src="{{img}}/title.png" class="max-h-70px" alt="" /></a>
				<div class="login-form">
					<form class="form" id="kt_login_singin_form" action="tkdlogin" method="POST">
						{% csrf_token %}
						<div class="font-weight-bolder text-dark font-size-h2 font-size-h1-l font-weight-bold text-center">TKD Market</div>
						<div class="font-weight-bolder text-dark font-size-h2 font-size-h1-l font-weight-bold font-size-h4 text-center pb-5 pb-lg-15">Sign-In</div>
						<div class="form-group">
							<div class="d-flex justify-content-between mt-n5">
								<label class="font-size-h6 font-weight-bolder text-dark" for="username">Username</label>
								<a href="{% url 'customerforgotusername' %}" class="text-primary font-size-h6 font-weight-bolder text-hover-primary pt-5">Forgot Username ?</a>
							</div>
							<input class="form-control form-control-solid py-7 px-6 rounded-lg border-0" type="text" name="username" id="username" autocomplete="off">
						</div>
						<div class="form-group">
							<div class="d-flex justify-content-between mt-n5">
								<label class="font-size-h6 font-weight-bolder text-dark pt-5" for="password">Password</label>
								<a href="{% url 'customerforgotpassword' %}" class="text-primary font-size-h6 font-weight-bolder text-hover-primary pt-5">Forgot Password ?</a>
							</div>
							<input class="form-control form-control-solid py-7 px-6 rounded-lg border-0" type="password" name="password" id="password" autocomplete="off">
							<i class="logintogglePassword fad fa-eye" id="logintogglePassword"></i>
						</div>
						<div class="pb-lg-0 pb-5"style="display: flex;flex-direction: column;align-items: center;">
							<button type="submit" id="kt_login_singin_form_submit_button" class="btn btn-primary font-weight-bolder font-size-h6 px-8 py-4 my-3 mr-3">Sign In</button>
							<div class="text-muted font-weight-bold font-size-h4 text-center"> or New Here? <a href="{% url 'customerregistration' %}" class="text-primary font-weight-bolder"> Create Account</a></div>
						</div>
					</form>
				</div>
				<div class="modal-body text-center px-0 pt-2 pb-4">
					<hr>
					<p class="text-muted font-weight-bold font-size-h4 text-center fs-sm text-heading mb-3 pt-4">Or sign in with</p>
					<button class="btn btn btn-outline-danger" data-toggle="tooltip" data-theme="dark" title="Google"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M19.9895 10.1871C19.9895 9.36767 19.9214 8.76973 19.7742 8.14966H10.1992V11.848H15.8195C15.7062 12.7671 15.0943 14.1512 13.7346 15.0813L13.7155 15.2051L16.7429 17.4969L16.9527 17.5174C18.879 15.7789 19.9895 13.221 19.9895 10.1871Z" fill="#4285F4"></path><path d="M10.1993 19.9313C12.9527 19.9313 15.2643 19.0454 16.9527 17.5174L13.7346 15.0813C12.8734 15.6682 11.7176 16.0779 10.1993 16.0779C7.50243 16.0779 5.21352 14.3395 4.39759 11.9366L4.27799 11.9466L1.13003 14.3273L1.08887 14.4391C2.76588 17.6945 6.21061 19.9313 10.1993 19.9313Z" fill="#34A853"></path><path d="M4.39748 11.9366C4.18219 11.3166 4.05759 10.6521 4.05759 9.96565C4.05759 9.27909 4.18219 8.61473 4.38615 7.99466L4.38045 7.8626L1.19304 5.44366L1.08875 5.49214C0.397576 6.84305 0.000976562 8.36008 0.000976562 9.96565C0.000976562 11.5712 0.397576 13.0882 1.08875 14.4391L4.39748 11.9366Z" fill="#FBBC05"></path><path d="M10.1993 3.85336C12.1142 3.85336 13.406 4.66168 14.1425 5.33717L17.0207 2.59107C15.253 0.985496 12.9527 0 10.1993 0C6.2106 0 2.76588 2.23672 1.08887 5.49214L4.38626 7.99466C5.21352 5.59183 7.50242 3.85336 10.1993 3.85336Z" fill="#EB4335"></path></svg></button>
					<button class="btn btn btn-outline-info" data-toggle="tooltip" data-theme="dark" title="Facebook"><i class="fa-brands fa-facebook-f"></i></button>
					<button class="btn btn-outline-primary" data-toggle="tooltip" data-theme="dark" title="Twitter"><i class="fa-brands fa-twitter"></i></button>
					<button class="btn btn-outline-success" data-toggle="tooltip" data-theme="dark" title="Linkedin"><i class="fa-brands fa-linkedin-in"></i></button>
				  </div>
			</div>
		</div>
	</div>
</div>
{% endblock content2 %}
{% block js %}
<script>
	var logintogglePassword = $("#logintogglePassword");
	var loginpassword = $("#password");
	logintogglePassword.click(function(){
		var logintype = loginpassword.attr("type") === "password" ? "text" : "password";
		loginpassword.attr("type",logintype);
		$(this).toggleClass("fa-low-vision");
	});
	var KTLogin = function() {
		var _buttonSpinnerClasses = 'spinner spinner-right spinner-white pr-15';
		var _handleFormSignin = function() {
			var form = KTUtil.getById('kt_login_singin_form');
			var formSubmitButton = KTUtil.getById('kt_login_singin_form_submit_button');
			if (!form) {return;}
			FormValidation.formValidation(form,{
						fields: {
							username: {validators: {notEmpty: {message: 'Username is required'}}},
							password: {validators: {notEmpty: {message: 'Password is required'}}},
						},
						plugins: {
							trigger: new FormValidation.plugins.Trigger(),
							submitButton: new FormValidation.plugins.SubmitButton(),
							bootstrap: new FormValidation.plugins.Bootstrap({eleInvalidClass: '',eleValidClass: '',})
						}
					}
				).on('core.form.valid', function() {
					KTUtil.btnWait(formSubmitButton, _buttonSpinnerClasses, "Please wait");
					setTimeout(function() {KTUtil.btnRelease(formSubmitButton);}, 2000);
					var frm = $('#kt_login_singin_form');
					$.ajax({
						type: frm.attr('method'),
						url: frm.attr('action'),
						data: frm.serialize(),
						success: function (tdata) {
							if(tdata == "password wrong" || tdata == "No Username"){
								Swal.fire({
									text: "Sorry, "+tdata,
									icon: "error",
									buttonsStyling: false,
									confirmButtonText: "Ok, got it!",
									customClass: {
										confirmButton: "btn font-weight-bold btn-light-primary"
									}
								})
							}else{ 
								sleep(1000).then((() => {
									location.href = tdata;
								}));
							}
						}
					});
					return false;
				});
		}
		return {init: function() {_handleFormSignin();}};
	}();
	jQuery(document).ready(function() {KTLogin.init();});
</script>
{% endblock js %}